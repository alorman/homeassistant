# separate automation file
#       
#- alias: 'Shutdown pi via command line on remote'
#  trigger:
#    platform: event
#    event_type: ir_command_received
#    event_data:
#      button_name: key_power
#  action:
#    service: shell_command.shutdown_pi
- alias: 'Set a scene with the philips hue bulbs when we watch tv with the harmony'
  hide_entity: False
  trigger:
    platform: event
    event_type: ir_command_received
    event_data:
      button_name: key_nine
  action:
    - service: light.hue_activate_scene
      data:
        group_name: "Bedroom"
        scene_name: "Bedroom Warm"
        
 #following state machine for TV on-off
 
- alias: 'Following state machine for TV'
  hide_entity: True
  trigger:
    platform: event
    event_type: ir_command_received
    event_data:
      button_name: lg_tv_power
  action:
    - service: homeassistant.toggle
      entity_id: input_boolean.lg_tv_status

- alias: 'Following state machine for Apple TV'
  hide_entity: True
  trigger:
    platform: event
    event_type: ir_command_received
    event_data:
      button_name: apple_tv_playpause
  action:
    - service: homeassistant.turnon
      entity_id: input_boolean.apple_tv_status

- alias: 'Following state machine for Teac Amplifier'
  hide_entity: True
  trigger:
    platform: event
    event_type: ir_command_received
    event_data:
      button_name: teac_power
  action:
    - service: homeassistant.toggle
      entity_id: input_boolean.teac_amp_status

#- alias: 'Following state machine for TV -off'
#  trigger:
#    platform: event
#    event_type: ir_command_received
#    event_data:
#      button_name: key_playpause
#  action:
#    - service: homeassistant.turn_off
#      entity_id: input_boolean.lg_tv_status

- alias: 'Text Alex about power down'
  hide_entity: False
  trigger:
    platform: event
    event_type: ir_command_received
    event_data:
      button_name: key_power
  action:
    - service: notify.sms_notify
      data:
        message: 'Someone pressed the power key'
        target:
          - +12022361848

#Nest motion detection
- alias: 'Nobody Home'
  trigger:
    platform: state
    entity_id: sensor.bedroom_away_mode, sensor.den_away_mode
    to: 'False'
  condition:
    condition: state
    entity_id: input_boolean.arm_alarm
    state: 'on'
  action:
    service: notify.sms_notify
    data:
      message: 'In your base, stealing your mans'
      target:
        - +12022361848

#Return lights to preset color temp when Night Shift goes off
- alias: 'Night Shift Off -Den'
  trigger:
    platform: state
    entity_id: switch.night_shift
    from: 'on'
    to: 'off'
  condition:
    condition: state
    entity_id: light.den
    state: 'on'
  action:
    service: light.hue_activate_scene
    data:
      group_name: "Den"
      scene_name: "Den Mid Warm"
      
- alias: 'Night Shift Off -Bedroom'
  trigger:
    platform: state
    entity_id: switch.night_shift
    from: 'on'
    to: 'off'
  condition:
    condition: state
    entity_id: light.bedroom
    state: 'on'
  action:
    service: light.hue_activate_scene
    data:
      group_name: "Bedroom"
      scene_name: "Bedroom Night"

- alias: 'Night Shift Off -Kitchen'
  trigger:
    platform: state
    entity_id: switch.night_shift
    from: 'on'
    to: 'off'
  condition:
    condition: state
    entity_id: light.kitchen
    state: 'on'
  action:
    service: light.hue_activate_scene
    data:
      group_name: "Kitchen"
      scene_name: "Kitchen Full Bright"
      
#turning the flux switch off for each light
- alias: 'Night shift on den'
  trigger:
    platform: state
    entity_id: light.den
    from: 'on'
    to: 'off'
  action:
    - service: homeassistant.turn_off
      entity_id: switch.night_shift

#reverse back on when engaged
- alias: 'Night shift off den'
  trigger:
    platform: state
    entity_id: light.den
    from: 'off'
    to: 'on'
  action:
    - service: homeassistant.turn_on
      entity_id: switch.night_shift
      
- alias: 'Night shift off kitchen'
  trigger:
    platform: state
    entity_id: light.kitchen
    from: 'on'
    to: 'off'
  action:
    - service: homeassistant.turn_off
      entity_id: switch.night_shift_kitchen

#reverse back on when engaged
- alias: 'Night shift on kitchen'
  trigger:
    platform: state
    entity_id: light.kitchen
    from: 'off'
    to: 'on'
  action:
    - service: homeassistant.turn_on
      entity_id: switch.night_shift_kitchen
